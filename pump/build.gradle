plugins {
    id 'application'
    id 'eclipse'
    id 'net.ltgt.apt-eclipse'
    id 'org.beryx.runtime' version '1.11.4'    
}

mainClassName = 'io.netlibs.ami.pump.Main'

apply from: "${rootDir}/gradle/eclipse.gradle"

repositories {
  jcenter()
  
}

runtime {
    options = [ '--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages' ]
    modules = [ 'jdk.crypto.ec','java.desktop', 'java.prefs', 'java.logging', 'jdk.unsupported', 'java.xml', 'java.sql', 'java.naming', 'java.management' ]
    
    
    // https://github.com/AdoptOpenJDK/openjdk14-binaries/releases/download/jdk-14.0.2%2B12/OpenJDK14U-jdk_arm_linux_hotspot_14.0.2_12.tar.gz
    
  targetPlatform("linux-x64") {
    jdkHome = jdkDownload('https://github.com/AdoptOpenJDK/openjdk14-binaries/releases/download/jdk-14.0.2%2B12/OpenJDK14U-jdk_x64_linux_hotspot_14.0.2_12.tar.gz') {
      archiveExtension = "tar.gz"
    }
  }

/*
  targetPlatform('mac-x64') {
    jdkHome = jdkDownload('https://github.com/AdoptOpenJDK/openjdk14-binaries/releases/download/jdk-14.0.2%2B12/OpenJDK14U-jdk_x64_mac_hotspot_14.0.2_12.tar.gz') {
      downloadDir = "$buildDir/mac-x64"
      archiveName = "mac-x64-jdk"
      archiveExtension = "tar.gz"
      pathToHome = "jdk-14.0.1+7/Contents/Home"
      overwrite = true
    }
  }
*/  
    
        
}

dependencies { 
  annotationProcessor 'org.immutables:value:2.8.8'
  compileOnly 'org.immutables:value-annotations:2.8.8'
  implementation 'org.slf4j:slf4j-api:1.7.30'
  implementation platform('io.netty:netty-bom:4.1.51.Final')
  implementation platform('software.amazon.awssdk:bom:2.15.0')
  implementation 'software.amazon.awssdk:auth'
  implementation 'software.amazon.awssdk:sts'
  implementation 'software.amazon.awssdk:sns'
  implementation 'software.amazon.awssdk:netty-nio-client'
  implementation 'info.picocli:picocli:4.5.1'  
}


dependencies {
  implementation 'org.ini4j:ini4j:0.5.4'
  implementation 'com.amazonaws:amazon-kinesis-producer:0.14.1'
  implementation platform('com.fasterxml.jackson:jackson-bom:2.11.2')
  implementation 'com.fasterxml.jackson.core:jackson-annotations'
  implementation 'com.fasterxml.jackson.core:jackson-databind'
  implementation 'com.fasterxml.jackson.module:jackson-module-parameter-names'
  implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'
  implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jdk8'
  implementation 'com.fasterxml.jackson.datatype:jackson-datatype-guava'
}

dependencies {
  implementation project(':client')
  implementation 'com.google.guava:guava:29.0-jre'  
  implementation 'javax.xml.bind:jaxb-api:2.3.1'
  implementation 'io.reactivex.rxjava3:rxjava:3.0.6'
  runtime 'ch.qos.logback:logback-classic:1.2.3'
  
}


